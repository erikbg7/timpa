import { LOCAL_URL } from '$env/static/private';
import type { Prediction } from 'replicate';

const mockId = 'w7mfhhpgjsrg80cg09kb3rzd33';

export const predictionMock: Prediction = {
	id: mockId,
	model: 'openai/whisper',
	version: '4d50797290df275329f202e48c76360b3f22b08d28c196cbc54600319435f8d2',
	source: 'api',
	input: {
		audio:
			'https://xmlhydweyaitfxmkrwag.supabase.co/storage/v1/object/sign/files/47cb63e0-6bc8-4683-ab56-b897be878f24/1718027208430.mp3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJmaWxlcy80N2NiNjNlMC02YmM4LTQ2ODMtYWI1Ni1iODk3YmU4NzhmMjQvMTcxODAyNzIwODQzMC5tcDMiLCJpYXQiOjE3MTgwMjcyMTAsImV4cCI6MTcxODAyNzgxMH0.c0oRhBsjtTYqkFnZwcRlg4iitxjm_Iula3nr2sLUaKw',
		compression_ratio_threshold: 2.4,
		condition_on_previous_text: true,
		logprob_threshold: -1,
		model: 'large-v3',
		no_speech_threshold: 0.6,
		suppress_tokens: '-1',
		temperature: 0,
		temperature_increment_on_fallback: 0.2,
		transcription: 'plain text',
		translate: false,
	},
	logs: '',
	output: null,
	error: null,
	status: 'starting',
	created_at: '2024-06-10T13:46:50.902Z',
	webhook: `${LOCAL_URL}/api/prediction-webhook`,
	webhook_events_filter: ['completed'],
	urls: {
		cancel: 'https://api.replicate.com/v1/predictions/w7mfhhpgjsrg80cg09kb3rzd30/cancel',
		get: 'https://api.replicate.com/v1/predictions/w7mfhhpgjsrg80cg09kb3rzd30',
	},
};

// this is what we receive in the body of the webhook
export const predictionWebHookData: Prediction = {
	id: mockId,
	completed_at: '2024-06-10T13:47:30.935655Z',
	created_at: '2024-06-10T13:46:50.902Z',
	error: null,
	source: 'api',
	input: {
		audio:
			'https://xmlhydweyaitfxmkrwag.supabase.co/storage/v1/object/sign/files/47cb63e0-6bc8-4683-ab56-b897be878f24/1718027208430.mp3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJmaWxlcy80N2NiNjNlMC02YmM4LTQ2ODMtYWI1Ni1iODk3YmU4NzhmMjQvMTcxODAyNzIwODQzMC5tcDMiLCJpYXQiOjE3MTgwMjcyMTAsImV4cCI6MTcxODAyNzgxMH0.c0oRhBsjtTYqkFnZwcRlg4iitxjm_Iula3nr2sLUaKw',
		compression_ratio_threshold: 2.4,
		condition_on_previous_text: true,
		logprob_threshold: -1,
		model: 'large-v3',
		no_speech_threshold: 0.6,
		suppress_tokens: '-1',
		temperature: 0,
		temperature_increment_on_fallback: 0.2,
		transcription: 'plain text',
		translate: false,
	},
	logs:
		'Transcribe with large-v3 model.\n' +
		'Detected language: Catalan\n' +
		'  0%|          | 0/1155 [00:00<?, ?frames/s]\n' +
		'100%|██████████| 1155/1155 [00:03<00:00, 349.56frames/s]\n' +
		'100%|██████████| 1155/1155 [00:03<00:00, 349.53frames/s]\n',
	metrics: { predict_time: 5.332407 },
	model: 'openai/whisper',
	output: {
		detected_language: 'catalan',
		segments: [
			{
				avg_logprob: -0.14031417347560418,
				compression_ratio: 1.4235807860262009,
				end: 5.26,
				id: 0,
				no_speech_prob: 0.0001669529447099194,
				seek: 0,
				start: 0,
				temperature: 0,
				text: " En exercici del legítim dret a l'autodeterminació",
				tokens: [],
			},
			{
				avg_logprob: -0.14031417347560418,
				compression_ratio: 1.4235807860262009,
				end: 7.8,
				id: 1,
				no_speech_prob: 0.0001669529447099194,
				seek: 0,
				start: 5.26,
				temperature: 0,
				text: ' que té una nació mil·lenària com Catalunya,',
				tokens: [],
			},
			{
				avg_logprob: -0.14031417347560418,
				compression_ratio: 1.4235807860262009,
				end: 15.700000000000001,
				id: 2,
				no_speech_prob: 0.0001669529447099194,
				seek: 0,
				start: 9.620000000000001,
				temperature: 0,
				text: " a un referèndum que se celebrarà el diumenge, dia 1 d'octubre d'enguany.",
				tokens: [],
			},
			{
				avg_logprob: -0.14031417347560418,
				compression_ratio: 1.4235807860262009,
				end: 18.32,
				id: 3,
				no_speech_prob: 0.0001669529447099194,
				seek: 0,
				start: 17.1,
				temperature: 0,
				text: ' Amb la pregunta,',
				tokens: [],
			},
			{
				avg_logprob: -0.14031417347560418,
				compression_ratio: 1.4235807860262009,
				end: 23.84,
				id: 4,
				no_speech_prob: 0.0001669529447099194,
				seek: 0,
				start: 19.6,
				temperature: 0,
				text: ' voleu que Catalunya sigui un estat independent en forma de república?',
				tokens: [],
			},
			{
				avg_logprob: -0.14031417347560418,
				compression_ratio: 1.4235807860262009,
				end: 29.02,
				id: 5,
				no_speech_prob: 0.0001669529447099194,
				seek: 0,
				start: 25.44,
				temperature: 0,
				text: ' Aquesta pregunta estarà formulada en els tres idiomes oficials',
				tokens: [],
			},
			{
				avg_logprob: -0.13974516868591308,
				compression_ratio: 1.4532019704433496,
				end: 30.7,
				id: 6,
				no_speech_prob: 0.000015566985894110985,
				seek: 2902,
				start: 29.02,
				temperature: 0,
				text: ' que hi ha al Principat de Catalunya,',
				tokens: [],
			},
			{
				avg_logprob: -0.13974516868591308,
				compression_ratio: 1.4532019704433496,
				end: 34.9,
				id: 7,
				no_speech_prob: 0.000015566985894110985,
				seek: 2902,
				start: 31.419999999999998,
				temperature: 0,
				text: " el català, el castellà i també l'aranès a la Vall d'Aran.",
				tokens: [],
			},
			{
				avg_logprob: -0.13974516868591308,
				compression_ratio: 1.4532019704433496,
				end: 38.980000000000004,
				id: 8,
				no_speech_prob: 0.000015566985894110985,
				seek: 2902,
				start: 35.96,
				temperature: 0,
				text: ' I la resposta que hi donin els nostres conciutadans,',
				tokens: [],
			},
			{
				avg_logprob: -0.13974516868591308,
				compression_ratio: 1.4532019704433496,
				end: 41.84,
				id: 9,
				no_speech_prob: 0.000015566985894110985,
				seek: 2902,
				start: 39.84,
				temperature: 0,
				text: ' en forma de sí o de no,',
				tokens: [],
			},
			{
				avg_logprob: -0.13974516868591308,
				compression_ratio: 1.4532019704433496,
				end: 46.28,
				id: 10,
				no_speech_prob: 0.000015566985894110985,
				seek: 2902,
				start: 42.76,
				temperature: 0,
				text: ' serà un mandat que aquest govern es compromet a aplicar.',
				tokens: [],
			},
			{
				avg_logprob: -0.13974516868591308,
				compression_ratio: 1.4532019704433496,
				end: 51.16,
				id: 11,
				no_speech_prob: 0.000015566985894110985,
				seek: 2902,
				start: 48.14,
				temperature: 0,
				text: ' Toca a les catalanes i els catalans de decidir el seu futur.',
				tokens: [],
			},
		],
		transcription:
			" En exercici del legítim dret a l'autodeterminació que té una nació mil·lenària com Catalunya, a un referèndum que se celebrarà el diumenge, dia 1 d'octubre d'enguany. Amb la pregunta, voleu que Catalunya sigui un estat independent en forma de república? Aquesta pregunta estarà formulada en els tres idiomes oficials que hi ha al Principat de Catalunya, el català, el castellà i també l'aranès a la Vall d'Aran. I la resposta que hi donin els nostres conciutadans, en forma de sí o de no, serà un mandat que aquest govern es compromet a aplicar. Toca a les catalanes i els catalans de decidir el seu futur.",
		translation: null,
	},
	started_at: '2024-06-10T13:47:25.603248Z',
	status: 'succeeded',
	urls: {
		cancel: 'https://api.replicate.com/v1/predictions/w7mfhhpgjsrg80cg09kb3rzd30/cancel',
		get: 'https://api.replicate.com/v1/predictions/w7mfhhpgjsrg80cg09kb3rzd30',
	},
	version: '4d50797290df275329f202e48c76360b3f22b08d28c196cbc54600319435f8d2',
	webhook: `${LOCAL_URL}/api/prediction-webhook`,
	webhook_events_filter: ['completed'],
};
